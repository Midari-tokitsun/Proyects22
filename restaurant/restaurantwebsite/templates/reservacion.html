
<!DOCTYPE html>
<html>

<title>Reservaciones</title>
<head>
    <head>
        <style>
            #restaurante {
                width: 400px;
                height: 400px;
              
                position: relative;
                margin: 0 auto;
            }
            
            .mesa {
                width: 50px;
                height: 50px;
                background-color: #ccc;
                color: white;
                text-align: center;
                line-height: 50px;
                border-radius: 5px;
                position: absolute;
                cursor: move;
            }


            
        </style>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>

        <link rel="stylesheet" href="https://cdn.datatables.net/1.11.4/css/jquery.dataTables.min.css
        ">
        <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.js"></script>
        <body>



            <nav class="navbar navbar-expand-lg navbar-dark bg-dark" id="navbar">
                <div class="container-fluid">
                  <a class="navbar-brand" href="#">Pizza Wave</a>
                  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarNav">
                  <ul class="navbar-nav">
                    <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/usuario">Inicio</a>
                    </li>
              
              
                    {% if request.session.username %}
              
                    <div class="collapse navbar-collapse" id="navbarNavDarkDropdown">
                    <ul class="navbar-nav">
                      <li class="nav-item dropdown">
                    
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDarkDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Vista Empleados
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink">
                    <li class="nav-item">
                      <a class="nav-link" href="/cargoregister">Registros de Cargos del Empleado</a>
                    </li>
                  
                    <li class="nav-item">
                      <a class="nav-link" href="/empleado">Registro de Empleados</a>
                    </li>
                  
                    <li class="nav-item">
                      <a class="nav-link" href="/tipodocumentoemp">Registro de Tipo De Documento</a>
                    </li>
            
            
                    <li class="nav-item">
                      <a class="nav-link" href="/departamentohome">Registro de Departamento</a>
                    </li>
            
                    <li class="nav-item">
                      <a class="nav-link" href="/puestos">Control de Puestos</a>
                    </li>
            
                    <li class="nav-item">
                      <a class="nav-link" href="/sucursal">Control de sucursal</a>
                    </li>
            
                    </ul>
              
                  </li>
                  </ul>
                </div>
                  
              
              
                    <div class="collapse navbar-collapse" id="navbarNavDarkDropdown">
                    <ul class="navbar-nav">
                      <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="#" id="navbarDarkDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Vista Usuarios
                      </a>
                      <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink">
                  
                        <li class="nav-item">
                        <a class="nav-link" href="/pedidos">Realizar Pedidos</a>
                        </li>
        
        
                        
                
                        <li class="nav-item">
                          <a class="nav-link" href="/registrousuarios">Usuarios</a>
                        </li>
                  
        
        
                        <li class="nav-item">
                            <a class="nav-link" href="/estadopedido">Estado Pedido</a>
                            </li>
                
                            <li class="nav-item">
                                <a class="nav-link" href="/detallepedido">Detalle Pedido</a>
                                </li>
        
        
                  
                      </ul>
                      </li>
                    </ul>
                    </div>
            
            
            
                    <div class="collapse navbar-collapse" id="navbarNavDarkDropdown">
                      <ul class="navbar-nav">
                        <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDarkDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                          Vista productos
                        </a>
                        <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink">
                    
                          <li class="nav-item">
                          <a class="nav-link" href="/categoria">Registros de categoria</a>
                          </li>
                  
                          <li class="nav-item">
                            <a class="nav-link" href="/almacen">Registros del almacen </a>
                          </li>
            
                          <li class="nav-item">
                            <a class="nav-link" href="/familiaproducto">Registros de familia producto</a>
                          </li>
            
                          <li class="nav-item">
                            <a class="nav-link" href="/menutabla">Registros del Menu</a>
                          </li>
            
                          <li class="nav-item">
                            <a class="nav-link" href="/elaboracion">Registros de Elaboracion</a>
                          </li>
            
            
                          <li class="nav-item">
                            <a class="nav-link" href="/recetatablaregistros">Registros de Receta</a>
                          </li>
                    
                        </ul>
                        </li>
                      </ul>
                      </div>
                  
              
              
              
              
                    <li class="nav-item">
                    <a class="nav-link" href="/signout">Cerrar Sesion</a>
                    </li>
              
              
              
               
                    {% else %}
                    
                    <li class="nav-item">
                    <a class="nav-link" href="/login_user">Iniciar Sesion</a>
                    </li>
                     
              
                         <li class="nav-item">
                    <a class="nav-link" href="/signup">Registrarse</a>
                    </li>
              
              
                    
                    {% endif %}
                    
                    
              
              
              
                  
              
                         <li class="nav-item">
                    <a class="nav-link" href="/menu">Menu</a>
                    </li>
              
                    
              
                    <div class="collapse navbar-collapse" id="navbarNav">
                    <li class="nav-item">
                      <a class="nav-link desactivated">{{request.session.username}}</a>
                    </li>
                    </div>
              
              
                  </ul>
                  </div>
                </div>
                </nav>
        

                <h1>Control de Reservaciones</h1>


<script>





$(document).ready(function() {
$('#myTable').DataTable({
"language": {
"url": "//cdn.datatables.net/plug-ins/1.10.15/i18n/Spanish.json"
}
});
})


                $(document).ready(function() {
                  function generarMesas(cantidad) {
                    // Agregar las nuevas mesas al final de las existentes
                    for (var i = 1; i <= cantidad; i++) {
                      var mesa = $("<div>", {
                        "class": "mesa",
                        "text": $(".mesa").length + 1
                      });
                      $("#mesas").append(mesa);
                      mesa.draggable({
                        containment: "#restaurante",
                        scroll: false
                      });
                    }
                  }
              
                  $("#generar-button").click(function() {
                    var cantidad = parseInt($("#num-mesas").val());
                    if (isNaN(cantidad) || cantidad < 1 || cantidad > 10) {
                      alert("Ingrese un número válido de mesas (entre 1 y 10).");
                      return;
                    }
                    generarMesas(cantidad);
                  });
              
                  $("#reset-button").click(function() {
  $("#mesas").html('');
  for (var i = 1; i <= cantidadMesas; i++) {
    $("#mesas").append('<div class="mesa">' + i + '</div>');
  }
  $(".mesa").draggable({
    containment: "#restaurante",
    scroll: false
  });
});


                    // Función para eliminar las mesas
  function eliminarMesas() {
    $(".mesa").remove();
  }
  
  // Configuramos el botón de eliminar mesas
  $("#eliminar-mesas-button").click(function() {
  $(".mesa").last().remove();
});

              
            
                });
              </script>



<div id="restaurante" > <img src="../static/images/restaurantfloorplant.JPG" alt=""></div>
<div id="mesas">

</div>
<div class="d-flex justify-content-center">
    <div class="col-auto">  
  <label for="num-mesas">Número de Reservaciones:</label>
  <input class="form-control" type="number" id="num-mesas">
</div>
<div class="col-auto">
  <button class="btn btn-success" id="generar-button">Generar</button>
</div>

<div class="col-auto">

<button class="btn btn-danger" id="reset-button">Resetear</button>
</div>

<div class="col-auto">

<button class="btn btn-info" id="eliminar-mesas-button">Eliminar</button>
</div>
</div>


<!-- Button trigger modal de Agregar Modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#GuardarReservacionModal">
    Agregar Nueva Reservacion
  </button>
  

<table id="myTable" class="display" cellspacing="0" width="100%">
    <thead>
    <tr>
    <th>ID</th>
    <th>Nombre del Reservante</th>
    <th>Nombre del Sucursal</th>
    <th>Numero de Mesas Reservadas</th>
    <th>Fecha de inicio de la reserva</th>
    <th>Fecha de Llegada a la reserva</th>
    <th>Descripcion</th>
    <th>Acciones</th>
    
</tr>
    </thead>
    <tfoot>
        <tr>
            <th>ID</th>
            <th>Nombre del Reservante</th>
            <th>Nombre del Sucursal</th>
            <th>Numero de Mesas Reservadas</th>
            <th>Fecha de inicio de la reserva</th>
            <th>Fecha de Llegada a la reserva</th>
            <th>Descripcion</th>
            <th>Acciones</th>
        </tr>
            </tfoot>
    
    <tbody>
      {% for r in res %}
    <tr>
    <td>{{ r.id_reservacion }}</td>
    <td>{{ r.nombre_reservante }}</td>
    <td>{{ r.nombre_sucursal }}</td>
    <td>{{ r.numero_mesas }}</td>
    <td>{{ r.fecha_reserva|date:"d/m/Y" }}</td>
    <td>{{ r.fecha_llegada|date:"d/m/Y" }}</td>
    <td>{{ r.descripcion }}</td>
    <td>
        <a href="" class="btn btn-primary">EDITAR</a>
        <a href="" class="btn btn-danger">ELIMINAR</a>
    </td>

</tr>
{% endfor %}
</tbody>
</table>


  <!-- Modal -->
  <div class="modal fade" id="GuardarReservacionModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Agregar Reservacion</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">

   
          




          <div class="form-group ">

                 
            <label for=""> ID de la Reservacion </label>
                 <input class="form-select" id="name" name="name" placeholder="Introduce el ID de la reservacion" type="text"/>
                </div>
              </div>
        
                
                
              
              <label for=""> Nombre del reservante </label>
                <select class="form-control" name="" id="">
                  {% for u in user %}
                  <option class="form-select" value="{{u.nombre}}">{{u.nombre}}</option>
                  {% endfor %}
                </select>
               
          

                <label for=""> Nombre de la Sucursal </label>
                <select class="form-control" name="" id="">
                  {% for s in sucu %}
                <option class="form-select" value="{{s.direccion_sucursal}}">{{s.direccion_sucursal}}

                </option>
                {% endfor %}
                </select>
             
               

                
                <label for=""> Numero de Reservaciones </label>
                <select class="form-control" name="" id="">
                  
                <option class="form-control" value="">Numero de Reservaciones</option>
                <option value="">1</option>
                <option value="">2</option>
                <option value="">3</option>
                <option value="">4</option>
                <option value="">5</option>
                <option value="">6</option>
                <option value="">7</option>
                <option value="">8</option>
                <option value="">9</option>
                <option value="">10</option>
                
                
              </select>
              
                <div class="form-group ">

                  <label for=""> Fecha de inicio de La Reserva </label>
              <input class="form-control" id="name" name="name" placeholder="" type="date"/>
            </div>

              <div class="form-group ">
                <label for=""> Fecha de Llegada a la Reserva </label>
            <input class="form-control" id="name" name="name" placeholder="Introduce el ID de la reservacion" type="date"/>
          </div>


  
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>

</body>
        
    </html>
